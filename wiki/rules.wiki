==Implementation examples for IFC schema rules==
These examples are listed to explain how to implement schema rules as Ruby methods.
Each IFC class could have a method called _validate_rules_

The number of rules in the IFC2x3 is about 339 rules, most of them are not so complex, so to avoid writing a lot of code we are trying to evaluate the rules automatically.

 # IfcActorRole 
{{{
def validate_rules
#developer name:
#date:22.08.2011
# WR1 : (Role <> IfcRoleEnum.USERDEFINED) OR ((Role = IfcRoleEnum.USERDEFINED) AND  EXISTS(SELF.UserDefinedRole));
 if not (@role !=".USERDEFINED." or (@role ==".USERDEFINED." && (@userDefinedRole !='$' &&@userDefinedRole !='')))
	#print warning message				
 end	
end
}}}
 # IfcPerson
{{{
def validate_rules
#developer name:
#date:22.08.2011
# WR1 : EXISTS(FamilyName) OR   EXISTS(GivenName);		
 if(@familyName=="$" or @familyName=="''")&&(@givenName=="$" or @givenName== "''")
	#print warning message				
 end	
end
}}}
 # IfcRelNests
{{{
def validate_rules
#developer name:
#date:22.08.2011
#NoSelfReference WR1 : SIZEOF(QUERY(Temp <* SELF\IfcRelDecomposes.RelatedObjects 
# | NOT(TYPEOF(SELF\IfcRelDecomposes.RelatingObject) = TYPEOF(Temp)))) = 0;
 if @relatedObjects.to_s.include?(@relatingObject.to_s) and @relatedObjects != nil			
	#print warning message
 end
end
}}}
 # IfcZone
{{{
/*
developer name:
date:22.08.2011
IFC2x3
WR1:
SIZEOF(QUERY(temp<*SELF\IfcGroup.IsGroupedBy.RelatedObjects|NOT(('IFCPRODUCTEXTENSION.IFCZONE'IN TYPEOF(temp)) 
 OR('IFCPRODUCTEXTENSION.IFCSPACE'IN TYPEOF(temp)))))=0;
IFC2x4
WR1 : 	(SIZEOF(SELF\IfcGroup.IsGroupedBy) = 0) 
  OR (SIZEOF (QUERY (temp <* SELF\IfcGroup.IsGroupedBy[1].RelatedObjects|NOT(('IFCZONE' IN TYPEOF(temp)) 
  OR ('IFC2X4_ALPHA.IFCSPACE' IN TYPEOF(temp)) OR ('IFC2X4_ALPHA.IFCSPATIALZONE' IN TYPEOF(temp)) ))) = 0);

A Zone is grouped by the objectified relationship IfcRelAssignsToGroup.
Only objects of type IfcSpace or IfcZone are allowed as RelatedObjects.
*/
def validate_rules
 if @isGroupedBy != nil 
 isGroupedByObj=$ifcObjects[@isGroupedBy].relatedObjects.split("#").each { |relObj_ID|
  if $ifcObjects[relObj_ID].class.to_s == "IFCSPACE" or $ifcObjects[relObj_ID].class.to_s == "IFCZONE"
  else
    #print warning message
  end;
 }					
 end	
end
}}}